;(function(e){"use strict";e.HSCore.components.HSModalWindow={_baseConfig:{bounds:100,debounce:50,overlayOpacity:.48,overlayColor:"#000000",speed:400,type:"onscroll",effect:"fadein",modalIsClosingByEsc:true,modalIsClosingByOverlay:true,onOpen:function(){},onClose:function(){},onComplete:function(){}},_pageCollection:e(),init:function(o,t){var n=e(o);if(!n.length)return;t=t&&e.isPlainObject(t)?e.extend({},this._baseConfig,t):this._baseConfig;t.selector=o;this._pageCollection=this._pageCollection.add(n.not(this._pageCollection));if(t.autonomous){return this.initAutonomousModalWindows(n,t)}return this.initBaseModalWindows(n,t)},initBaseModalWindows:function(o,t){return o.on("click",function(o){if(!("Custombox"in window))return;var n=e(this),a=n.data("modal-target"),l=n.data("modal-effect")||t["effect"],i=n.data("modal-is-closing-by-esc")!==undefined?Boolean(n.data("modal-is-closing-by-esc")):t["modalIsClosingByEsc"],c=n.data("modal-is-closing-by-overlay")!==undefined?Boolean(n.data("modal-is-closing-by-overlay")):t["modalIsClosingByOverlay"];if(!a||!e(a).length)return;new Custombox.modal({content:{target:a,effect:l,close:i,onOpen:function(){t["onOpen"].call(e(a))},onClose:function(){t["onClose"].call(e(a))},onComplete:function(){t["onComplete"].call(e(a))}},overlay:{color:n.data("overlay-color")||t["overlayColor"],opacity:n.data("overlay-opacity")||t["overlayOpacity"],close:c,speedIn:n.data("speed")||t["speed"],speedOut:n.data("speed")||t["speed"]}}).open();o.preventDefault()})},initAutonomousModalWindows:function(o,t){var n=this;return o.each(function(o,a){var l=e(a),i=l.data("modal-type");switch(i){case"hashlink":n.initHashLinkPopup(l,t);break;case"onscroll":n.initOnScrollPopup(l,t);break;case"beforeunload":n.initBeforeUnloadPopup(l,t);break;case"ontarget":n.initOnTargetPopup(l,t);break;case"aftersometime":n.initAfterSomeTimePopup(l,t);break}})},initHashLinkPopup:function(o,t){var n=this,a=e(window.location.hash),l=e("#"+o.attr("id"));if(a.length&&a.attr("id")==o.attr("id")){new Custombox.modal({content:{target:"#"+o.attr("id"),effect:o.data("effect")||t["effect"],onOpen:function(){t["onOpen"].call(e(l))},onClose:function(){t["onClose"].call(e(l))},onComplete:function(){t["onComplete"].call(e(l))}},overlay:{color:o.data("overlay-color")||t["overlayColor"],opacity:o.data("overlay-opacity")||t["overlayOpacity"],speedIn:o.data("speed")||t["speed"],speedOut:o.data("speed")||t["speed"]}}).open()}},initOnScrollPopup:function(o,t){var n=this,a=e(window),l=o.data("breakpoint")?o.data("breakpoint"):0,i=e("#"+o.attr("id"));a.on("scroll.popup",function(){var n=a.scrollTop()+a.height();if(n>=l){new Custombox.modal({content:{target:"#"+o.attr("id"),effect:o.data("effect")||t["effect"],onOpen:function(){t["onOpen"].call(e(i))},onClose:function(){t["onClose"].call(e(i))},onComplete:function(){t["onComplete"].call(e(i))}},overlay:{color:o.data("overlay-color")||t["overlayColor"],opacity:o.data("overlay-opacity")||t["overlayOpacity"],speedIn:o.data("speed")||t["speed"],speedOut:o.data("speed")||t["speed"]}}).open();a.off("scroll.popup")}});a.trigger("scroll.popup")},initBeforeUnloadPopup:function(o,t){var n=this,a=0,l=e("#"+o.attr("id")),i;window.addEventListener("mousemove",function(n){if(i)clearTimeout(i);i=setTimeout(function(){if(n.clientY<10&&!a){a++;new Custombox.modal({content:{target:"#"+o.attr("id"),effect:o.data("effect")||t["effect"],onOpen:function(){t["onOpen"].call(e(l))},onClose:function(){t["onClose"].call(e(l))},onComplete:function(){t["onComplete"].call(e(l))}},overlay:{color:o.data("overlay-color")||t["overlayColor"],opacity:o.data("overlay-opacity")||t["overlayOpacity"],speedIn:o.data("speed")||t["speed"],speedOut:o.data("speed")||t["speed"]}}).open()}},10)})},initOnTargetPopup:function(o,t){var n=this,a=o.data("target");if(!a||!e(a).length)return;appear({bounds:t["bounds"],debounce:t["debounce"],elements:function(){return document.querySelectorAll(a)},appear:function(n){new Custombox.modal({content:{target:"#"+o.attr("id"),effect:o.data("effect")||t["effect"],onOpen:function(){t["onOpen"].call(e(a))},onClose:function(){t["onClose"].call(e(a))},onComplete:function(){t["onComplete"].call(e(a))}},overlay:{color:o.data("overlay-color")||t["overlayColor"],opacity:o.data("overlay-opacity")||t["overlayOpacity"],speedIn:o.data("speed")||t["speed"],speedOut:o.data("speed")||t["speed"]}}).open()}})},initAfterSomeTimePopup:function(o,t){var n=this,a=e("#"+o.attr("id"));setTimeout(function(){new Custombox.modal({content:{target:"#"+o.attr("id"),effect:o.data("effect")||t["effect"],onOpen:function(){t["onOpen"].call(e(a))},onClose:function(){t["onClose"].call(e(a))},onComplete:function(){t["onComplete"].call(e(a))}},overlay:{color:o.data("overlay-color")||t["overlayColor"],opacity:o.data("overlay-opacity")||t["overlayOpacity"],speedIn:o.data("speed")||t["speed"],speedOut:o.data("speed")||t["speed"]}}).open()},o.data("delay")?o.data("delay"):10)}}})(jQuery);