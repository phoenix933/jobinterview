;(function(t){"use strict";t.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:"click",unfoldType:"simple",unfoldDuration:300,unfoldEasing:"linear",unfoldAnimationIn:"fadeIn",unfoldAnimationOut:"fadeOut",unfoldHideOnScroll:true,unfoldHideOnBlur:false,unfoldDelay:350,unfoldOpenedElement:"init",unfoldOverlay:false,afterOpen:function(t){},beforeClose:function(t){},afterClose:function(t){}},_pageCollection:t(),init:function(e,n){var l;if(!e||!e.length)return;l=this;var d;e.each(function(e,f){var s=t(f),r;if(s.data("HSUnfold"))return;r=n&&t.isPlainObject(n)?t.extend(true,{},l._baseConfig,n,s.data()):t.extend(true,{},l._baseConfig,s.data());switch(r.unfoldType){case"css-animation":s.data("HSUnfold",new o(s,r));break;case"jquery-slide":s.data("HSUnfold",new i(s,r));break;default:s.data("HSUnfold",new a(s,r))}l._pageCollection=l._pageCollection.add(s);l._bindEvents(s,r.unfoldEvent,r.unfoldDelay);var u=t(f).data("HSUnfold");d=t(u.target).find("input, textarea").length;if(t(u.target).find("[data-unfold-target]").length){s.addClass("target-of-invoker-has-unfolds")}});t(document).on("click touchstart","body",function(e){if(e.target.id===l._baseConfig.unfoldOpenedElement)return;if(t(e.target).closest("#"+l._baseConfig.unfoldOpenedElement).length)return;l._pageCollection.each(function(e,n){var a=window.innerWidth,o=Boolean(t(n).data("is-mobile-only"));if(!o){t(n).data("HSUnfold").hide()}else if(o&&a<769){t(n).data("HSUnfold").hide()}if(t(n).data("HSUnfold").config.unfoldOverlay){t(n).data("HSUnfold").config.unfoldDelay=setTimeout(function(){t("."+t(n).data("HSUnfold").config.unfoldOverlay.className).fadeOut(t(n).data("HSUnfold").config.unfoldOverlay.animationSpeed?t(n).data("HSUnfold").config.unfoldOverlay.animationSpeed:200)},t(n).data("HSUnfold").config.unfoldDelay)}t(n).data("HSUnfold").config.beforeClose.call(l.target,l.element)})});t(window).on("scroll.HSUnfold",function(){l._pageCollection.each(function(e,n){var a=t(n).data("HSUnfold");if(a.getOption("unfoldHideOnScroll")&&d===0){a.hide()}else if(a.getOption("unfoldHideOnScroll")&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)){a.hide()}})});t(window).on("resize.HSUnfold",function(){if(l._resizeTimeOutId)clearTimeout(l._resizeTimeOutId);l._resizeTimeOutId=setTimeout(function(){l._pageCollection.each(function(e,n){var a=t(n).data("HSUnfold");a.smartPosition(a.target)})},50)});t(document).on("keydown.HSUnfold",function(e){if(t("body").hasClass("u-unfold-opened")){if(e.keyCode&&e.keyCode===38||e.keyCode&&e.keyCode===40){e.preventDefault()}if(e.keyCode&&e.keyCode===27){l._pageCollection.each(function(e,n){t(n).data("HSUnfold").hide()});t("body").removeClass("u-unfold-opened")}}});return e},_bindEvents:function(n,a,o){var i=this,l=t(n.data("unfold-target"));if(a==="hover"&&!e()){n.on("mouseenter.HSUnfold",function(){var e=t(this),n=e.data("HSUnfold");if(!n)return;if(n.unfoldTimeOut)clearTimeout(n.unfoldTimeOut);n.show();t("body").addClass("u-unfold-opened")}).on("mouseleave.HSUnfold",function(){var e=t(this),n=e.data("HSUnfold");if(!n)return;n.unfoldTimeOut=setTimeout(function(){n.hide();t("body").removeClass("u-unfold-opened")},o)});if(l.length){l.on("mouseenter.HSUnfold",function(){var t=n.data("HSUnfold");if(t.unfoldTimeOut)clearTimeout(t.unfoldTimeOut);t.show()}).on("mouseleave.HSUnfold",function(){var t=n.data("HSUnfold");t.unfoldTimeOut=setTimeout(function(){t.hide()},o)})}}else{n.on("click.HSUnfold",function(e){var n=t(this),a=t("[data-unfold-target].active:not(.target-of-invoker-has-unfolds)"),o=t("[data-unfold-target].active.target-of-invoker-has-unfolds");i._baseConfig.unfoldOpenedElement=n.data("HSUnfold").target[0].id;if(!n.data("HSUnfold"))return;if(!n.hasClass("target-of-invoker-has-unfolds")){if(a.length){a.data("HSUnfold").toggle()}}else{if(o.length){o.data("HSUnfold").toggle()}}n.data("HSUnfold").toggle();t("body").toggleClass("u-unfold-opened");e.stopPropagation();e.preventDefault()});if(Boolean(n.data("unfold-target-is-menu"))){var d=t(n.data("unfold-target")),f=d.children();f.on("click",function(){n.data("HSUnfold").toggle()})}}}};function e(){return"ontouchstart"in window}function n(e,n){var a=this;if(!e.length)return false;a.element=e;a.config=n;a.target=t(a.element.data("unfold-target"));a.allInvokers=t('[data-unfold-target="'+a.element.data("unfold-target")+'"]');a.toggle=function(){if(!a.target.length)return a;var e=a.element[0].dataset,n=e.unfoldOverlay?JSON.parse(e.unfoldOverlay):false;if(a.defaultState){if(e.unfoldOverlay){if(!t("."+n.className).length){t('<div class="'+n.className+'" style="background-color: '+n.background+'"></div>').prependTo("body")}if(t("."+n.className).length){t("."+n.className).fadeIn(n.animationSpeed?n.animationSpeed:200)}}a.show()}else{if(t("."+n.className).length){a.config.unfoldTimeOut=setTimeout(function(){t("."+n.className).fadeOut(n.animationSpeed?n.animationSpeed:200)},a.config.unfoldDelay)}a.hide()}return a};this.smartPosition=function(e){if(e.data("baseDirection")){e.css(e.data("baseDirection").direction,e.data("baseDirection").value)}e.removeClass("u-unfold--reverse-y");var n=t(window),a=getComputedStyle(e.get(0)),o=Math.abs(parseInt(a.left,10))<40?"left":"right",i=e.offset();if(o==="right"){if(!e.data("baseDirection"))e.data("baseDirection",{direction:"right",value:parseInt(a.right,10)});if(i.left<0){e.css("right",(parseInt(e.css("right"),10)-(i.left-10))*-1)}}else{if(!e.data("baseDirection"))e.data("baseDirection",{direction:"left",value:parseInt(a.left,10)});if(i.left+e.outerWidth()>n.width()){e.css("left",parseInt(e.css("left"),10)-(i.left+e.outerWidth()+10-n.width()))}}if(i.top+e.outerHeight()-n.scrollTop()>n.height()){e.addClass("u-unfold--reverse-y")}};this.getOption=function(t){return this.config[t]?this.config[t]:null};return true}function a(t,e){if(!n.call(this,t,e))return;Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}});this.target.addClass("u-unfold--simple");this.hide()}function o(t,e){if(!n.call(this,t,e))return;var a=this;this.target.addClass("u-unfold--css-animation u-unfold--hidden").css("animation-duration",a.config.unfoldDuration+"ms");Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}});if(this.target.length){this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(t){if(a.target.hasClass(a.config.unfoldAnimationOut)){a.target.removeClass(a.config.unfoldAnimationOut).addClass("u-unfold--hidden");if(a.allInvokers.length)a.allInvokers.attr("aria-expanded","false");a.config.afterClose.call(a.target,a.element)}if(a.target.hasClass(a.config.unfoldAnimationIn)){if(a.allInvokers.length)a.allInvokers.attr("aria-expanded","true");a.config.afterOpen.call(a.target,a.element)}t.preventDefault();t.stopPropagation()})}}function i(t,e){if(!n.call(this,t,e))return;this.target.addClass("u-unfold--jquery-slide u-unfold--hidden").hide();Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}})}a.prototype.show=function(){var e=t(this)[0].config.unfoldTarget;t('[data-unfold-target="'+e+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden");if(this.allInvokers.length)this.allInvokers.attr("aria-expanded","true");this.config.afterOpen.call(this.target,this.element);return this};a.prototype.hide=function(){var e=t(this)[0].config.unfoldTarget;t('[data-unfold-target="'+e+'"]').removeClass("active");this.target.addClass("u-unfold--hidden");if(this.allInvokers.length)this.allInvokers.attr("aria-expanded","false");this.config.afterClose.call(this.target,this.element);return this};o.prototype.show=function(){var e=this,n=t(e)[0].config.unfoldTarget;t('[data-unfold-target="'+n+'"]').addClass("active");e.smartPosition(e.target);e.target.removeClass("u-unfold--hidden").removeClass(e.config.unfoldAnimationOut);if(!e.config.unfoldOverlay){e.target.addClass(e.config.unfoldAnimationIn)}else{setTimeout(function(){e.target.addClass(e.config.unfoldAnimationIn)})}e.config.afterOpen.call(e.target,e.element)};o.prototype.hide=function(){var e=t(this)[0].config.unfoldTarget;t('[data-unfold-target="'+e+'"]').removeClass("active");this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)};i.prototype.show=function(){var e=this;var n=t(this)[0].config.unfoldTarget;t('[data-unfold-target="'+n+'"]').addClass("active");this.smartPosition(this.target);this.target.removeClass("u-unfold--hidden").stop().slideDown({duration:e.config.unfoldDuration,easing:e.config.unfoldEasing,complete:function(){e.config.afterOpen.call(e.target,e.element)}})};i.prototype.hide=function(){var e=this;var n=t(this)[0].config.unfoldTarget;t('[data-unfold-target="'+n+'"]').removeClass("active");this.target.slideUp({duration:e.config.unfoldDuration,easing:e.config.unfoldEasing,complete:function(){e.config.afterClose.call(e.target,e.element);e.target.addClass("u-unfold--hidden")}})}})(jQuery);