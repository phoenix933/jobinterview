;(function(e){"use strict";e.HSCore.components.HSHeaderFullscreen={_baseConfig:{afterOpen:function(){},afterClose:function(){},overlayClass:"u-fullscreen__overlay",sectionsContainerSelector:".u-fullscreen__content"},_pageCollection:e(),init:function(i,s){var o=this;if(!i)return e();i=e(i);if(!i.length)return e();s=s&&e.isPlainObject(s)?s:{};this._bindGlobalEvents();return i.each(function(i,r){var a=e(this),l=e.extend(true,{},o._baseConfig,s,a.data());if(a.data("HSHeaderFullscreen"))return;a.data("HSHeaderFullscreen",new t(a,l,new n));o._pageCollection=o._pageCollection.add(a)})},_bindGlobalEvents:function(){var t=this;e(window).on("resize.HSHeaderFullscreen",function(){if(t.resizeTimeOutId)clearTimeout(t.resizeTimeOutId);t.resizeTimeOutId=setTimeout(function(){t._pageCollection.each(function(t,n){var i=e(n),s=i.data("HSHeaderFullscreen");if(!s)return;s.update()})},50)});e(document).on("keyup.HSHeaderFullscreen",function(n){if(n.keyCode&&n.keyCode==27){t._pageCollection.each(function(t,n){var i=e(n),s=i.data("HSHeaderFullscreen"),o=s.invoker;if(!s)return;if(o.length&&o.find(".is-active").length)o.find(".is-active").removeClass("is-active");s.hide()})}})}};function t(t,n,i){var s=this;this.element=t;this.config=n;this.effect=i;this.overlay=e("<div></div>",{class:s.config.overlayClass});Object.defineProperty(this,"isShown",{get:function(){return s.effect.isShown()}});Object.defineProperty(this,"sections",{get:function(){return s.element.find(s.config.sectionsContainerSelector)}});this.element.append(this.overlay);this.effect.init(this.element,this.overlay,this.config.afterOpen,this.config.afterClose);this._bindEvents();if(e.HSCore.components.HSScrollBar&&this.sections.length){e.HSCore.components.HSScrollBar.init(this.sections)}};t.prototype._bindEvents=function(){var t=this;this.invoker=e('[data-target="#'+this.element.attr("id")+'"]');if(this.invoker.length){this.invoker.off("click.HSHeaderFullscreen").on("click.HSHeaderFullscreen",function(e){t[t.isShown?"hide":"show"]();e.preventDefault()})}return this};t.prototype.update=function(){if(!this.effect)return false;this.effect.update();return this};t.prototype.show=function(){if(!this.effect)return false;this.effect.show();return this};t.prototype.hide=function(){if(!this.effect)return false;this.effect.hide();return this};function n(){this._isShown=false};n.prototype.init=function(e,t,n,i){var s=this;this.element=e;this.overlay=t;this.afterOpen=n;this.afterClose=i;this.overlay.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){if(s.isShown()&&e.originalEvent.propertyName=="transform"){s.afterOpen.call(s.element,s.overlay)}else if(!s.isShown()&&e.originalEvent.propertyName=="transform"){s.afterClose.call(s.element,s.overlay)}e.stopPropagation();e.preventDefault()});this.update();this.overlay.addClass(this.element.data("overlay-classes"));return this};n.prototype.destroy=function(){this.overlay.css({"width":"auto","height":"auto"});this.element.removeClass("u-fullscreen--showed");return this};n.prototype.update=function(){var t=e(window),n=t.width(),i=t.height();this.overlay.css({width:n>i?n*1.5:i*1.5,height:n>i?n*1.5:i*1.5});return this};n.prototype.show=function(){this.element.addClass("u-fullscreen--showed");this._isShown=true;return this};n.prototype.hide=function(){this.element.removeClass("u-fullscreen--showed");this._isShown=false;return this};n.prototype.isShown=function(){return this._isShown}})(jQuery);